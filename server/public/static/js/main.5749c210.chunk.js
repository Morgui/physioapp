(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{103:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(28),i=a.n(l),c=a(7),o=a(9),s=a(11),u=a(10),m=a(12),p=(a(78),a(79),a(33)),h=a(37),d=a.n(h),E=function e(){var t=this;Object(c.a)(this,e),this.signup=function(e){var a=e.username,n=e.password;return t.service.post("/signup",{username:a,password:n}).then((function(e){return e.data}))},this.login=function(e){var a=e.username,n=e.password;return t.service.post("/login",{username:a,password:n}).then((function(e){return e.data}))},this.logout=function(){return t.service.post("/logout").then((function(e){return e.data}))},this.loggedin=function(){return t.service.get("/loggedin").then((function(e){return e.data}))},this.service=d.a.create({baseURL:"".concat("https://project-physio-app.herokuapp.com/api","/auth"),withCredentials:!0})},f=a(44),g=a(36),b=a(13),v=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).logout=function(){a.authServices.logout().then((function(e){a.setState({username:"",password:""}),a.props.setTheUser(!1)})).catch((function(e){return console.log(e)}))},a.state={},a.authServices=new E,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.loggedInUser?r.a.createElement(r.a.Fragment,null,"Hi, ",this.props.loggedInUser.username,"!"):r.a.createElement(r.a.Fragment,null," ");return r.a.createElement(f.a,{className:"navbar",expand:"lg",bg:"light"},r.a.createElement(f.a.Brand,{href:"/"},"PhysioApp"),r.a.createElement(f.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(f.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(g.a,{className:"ml-auto"},r.a.createElement(g.a.Link,{as:"div"}," ",r.a.createElement(b.b,{to:"/"},"Inicio")),r.a.createElement(g.a.Link,{as:"div"}," ",r.a.createElement(b.b,{to:"/appointment"},"Cita Online")),this.props.loggedInUser?r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a.Link,{onClick:this.logout},"Cerrar Sesi\xf3n"),r.a.createElement(g.a.Link,{as:"div"},r.a.createElement(b.b,{to:"/admin"},e))):r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a.Link,{as:"div"}," ",r.a.createElement(b.b,{to:"/login"},"Intranet"))))))}}]),t}(n.Component),j=a(29),y=a(5),O=a(15),C=a(18),S=a(8),_=a(14),L=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(j.a)({},n,r))},a.postUser=function(){a.authService.login(a.state).then((function(e){a.setState({username:"",password:""}),a.props.setTheUser(e),a.props.history.push("/admin")})).catch((function(e){return console.log({err:e})}))},a.handleSubmit=function(e){e.preventDefault(),a.postUser()},a.state={username:"",password:""},a.authService=new E,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(C.a,{className:"auth-div"},r.a.createElement("h1",null,"Log In"),r.a.createElement(_.a,{className:"justify-content-md-center"},r.a.createElement(S.a,{md:4},r.a.createElement(y.a,{onSubmit:this.handleSubmit},r.a.createElement(y.a.Group,null,r.a.createElement(y.a.Label,null,"Username"),r.a.createElement(y.a.Control,{type:"text",name:"username",value:this.state.username,onChange:this.handleChange})),r.a.createElement(y.a.Group,null,r.a.createElement(y.a.Label,null,"Password"),r.a.createElement(y.a.Control,{type:"password",name:"password",value:this.state.password,onChange:this.handleChange})),r.a.createElement(O.a,{variant:"info",type:"submit"},"Log In")))))}}]),t}(n.Component),D=a(50),w=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(C.a,null,r.a.createElement(_.a,{className:"justify-content-md-center margin"},r.a.createElement("h1",{className:"textIndex"},"Profesional experto en salud y bienestar")),r.a.createElement(_.a,{className:"justify-content-md-center"},r.a.createElement(S.a,{sm:{span:4}},r.a.createElement(D.a,{src:"/images/fisio1.jpg",alt:"imagen home",fluid:!0})),r.a.createElement(S.a,null,r.a.createElement("p",null,"Ofrecemos un trato personalizado que busca una mejor\xeda duradera en la mayor brevedad posible. Trabajamos vocacionalmente y nos encanta verle satisfecho, ese es nuestro mejor premio. No dude en pedir su cita online y seguro que no se arrepentir\xe1. Nuestra combinaci\xf3n de experiencia, profesionalidad, vocaci\xf3n y atenci\xf3n al cliente es inmejorable."))),r.a.createElement(_.a,{className:"justify-content-md-end"},r.a.createElement(S.a,{md:{span:4,offset:4}},r.a.createElement(O.a,{variant:"outline-info",size:"sm"},r.a.createElement(b.b,{to:"#"},"Nuestros servicios")),r.a.createElement(O.a,{variant:"outline-info",size:"sm"},r.a.createElement(b.b,{to:"/appointment"},"Pide tu Cita")))))}}]),t}(n.Component),A=a(35),N=(a(103),a(43)),k=function e(){var t=this;Object(c.a)(this,e),this.getAllAppointments=function(){return t.service.get("/appointment").then((function(e){return e.data}))},this.getAppointmentDetails=function(e){return t.service.get("/appointment/".concat(e)).then((function(e){return e.data}))},this.createAppointment=function(e){return t.service.post("/appointment",e).then((function(e){return e.data}))},this.getAppointmentByReference=function(e){return t.service.get("/appointment/".concat(e)).then((function(e){return e.data}))},this.getFreeHoursByDate=function(e){return t.service.post("/appointment/available-hours",{date:e}).then((function(e){return e.data}))},this.updateAppointmentStatus=function(e,a){return t.service.post("/appointment/".concat(e,"/update-state"),{status:a}).then((function(e){return e.data}))},this.getOlderAppointments=function(e){return t.service.get("/appointment/?patientId=".concat(e)).then((function(e){return e.data}))},this.service=d.a.create({baseURL:"".concat("https://project-physio-app.herokuapp.com/api"),withCredentials:!0})},M=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState({appointment:Object(A.a)({},a.state.appointment,Object(j.a)({},n,r))})},a.onDateChange=function(e){var t=e.target,n=t.name,r=t.value;a.appointmentService.getFreeHoursByDate(r).then((function(e){a.setState({appointment:Object(A.a)({},a.state.appointment,Object(j.a)({},n,r)),availableHours:e})})).catch((function(e){return console.log(e)}))},a.createAppointment=function(e){return a.appointmentService.createAppointment(e).then((function(e){return a.setState({createdAppointment:e.data}),e})).catch((function(e){return console.log(e)}))},a.handleSubmit=function(e){e.preventDefault(),a.createAppointment(a.state.appointment).then((function(e){console.log("vuelve del service"),a.props.history.push("/appointment/created/".concat(e.data.reference))})).catch((function(e){return console.log(e)}))},a.handleClose=function(){return a.setState({showForm:!1})},a.handleShow=function(){return a.setState({showForm:!0})},a.appointmentService=new k,a.state={appointment:{name:"",surname:"",email:"",date:"",motive:""},showForm:!1,createdAppointment:null,availableHours:[]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(C.a,null,r.a.createElement(_.a,{className:"justify-content-md-center"},r.a.createElement("h1",{className:"margin"},"Pide tu cita")),r.a.createElement(_.a,{className:"justify-content-md-center"},r.a.createElement(S.a,{sm:{span:4}},r.a.createElement(D.a,{src:"/images/img_cita.jpeg",alt:"imagen cita",rounded:!0})),r.a.createElement(S.a,null,r.a.createElement("p",null,"Ofrecemos un trato personalizado que busca una mejor\xeda duradera en la mayor brevedad posible. Trabajamos vocacionalmente y nos encanta verle satisfecho, ese es nuestro mejor premio. No dude en pedir su cita online y seguro que no se arrepentir\xe1. Nuestra combinaci\xf3n de experiencia, profesionalidad, vocaci\xf3n y atenci\xf3n al cliente es inmejorable."))),r.a.createElement(_.a,{className:"justify-content-md-center margin"},r.a.createElement(S.a,{sm:{span:5,offset:4}},r.a.createElement(O.a,{variant:"success",onClick:this.handleShow},"Pedir Cita"),r.a.createElement(N.a,{show:this.state.showForm,onHide:this.handleClose},r.a.createElement(N.a.Header,{closeButton:!0},r.a.createElement(N.a.Title,null,"Solicitar Cita")),r.a.createElement(N.a.Body,null,r.a.createElement(y.a,{onSubmit:this.handleSubmit},r.a.createElement(y.a.Group,null,r.a.createElement(y.a.Label,null,"Nombre"),r.a.createElement(y.a.Control,{type:"text",name:"name",value:this.state.appointment.name,onChange:this.handleChange})),r.a.createElement(y.a.Group,null,r.a.createElement(y.a.Label,null,"Apellidos"),r.a.createElement(y.a.Control,{type:"text",name:"surname",value:this.state.appointment.surname,onChange:this.handleChange})),r.a.createElement(y.a.Group,null,r.a.createElement(y.a.Label,null,"Email"),r.a.createElement(y.a.Control,{type:"email",name:"email",value:this.state.appointment.email,onChange:this.handleChange})),r.a.createElement(y.a.Group,null,r.a.createElement(y.a.Label,null,"Fecha"),r.a.createElement(y.a.Control,{type:"date",name:"date",value:this.state.appointment.date,onChange:this.onDateChange})),r.a.createElement(y.a.Group,null,r.a.createElement(y.a.Label,null,"Hora"),r.a.createElement("select",{name:"time",value:this.state.appointment.time,onChange:this.handleChange,className:"form-control",required:!0},r.a.createElement("option",{value:""},"---"),this.state.availableHours.map((function(e){return r.a.createElement("option",{value:e,key:e},e)})))),r.a.createElement(y.a.Group,null,r.a.createElement(y.a.Label,null,"Motivo de la consulta"),r.a.createElement(y.a.Control,{type:"text",name:"motive",value:this.state.appointment.motive,onChange:this.handleChange})),r.a.createElement(O.a,{variant:"info",type:"submit"},"Solicitar cita"))))))))}}]),t}(n.Component),P=a(25),I=a.n(P);!function(e){var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),a="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");e.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,n){return/-MMM-/.test(n)?a[e.month()]:t[e.month()]},weekdays:"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),weekdaysMin:"Do_Lu_Ma_Mi_Ju_Vi_S\xe1".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY LT",LLLL:"dddd, D [de] MMMM [de] YYYY LT"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma\xf1ana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",M:"un mes",MM:"%d meses",y:"un a\xf1o",yy:"%d a\xf1os"},ordinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:1,doy:4}})}(I.a);var x=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){return a.getAppointmentByReference(a.state.reference)},a.getAppointmentByReference=function(e){a.appointmentService.getAppointmentByReference(e).then((function(e){console.log(e),e?a.setState({appointment:e}):a.props.history.push("/appointment")})).catch((function(e){return console.log(e)}))},a.dateParse=function(e,t){return I.a.locale("es"),I()(e).format(t)},a.state={reference:e.match.params.reference,appointment:{}},a.appointmentService=new k,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(C.a,null,r.a.createElement(_.a,{className:"justify-content-md-center margin"},r.a.createElement("h3",null,"Su cita para el d\xeda ",this.dateParse(this.state.appointment.date,"LL")," a las ",this.dateParse(this.state.appointment.date,"LT")," ha sido creada y se encuentra pendiente de confirmaci\xf3n")),r.a.createElement(_.a,null,r.a.createElement(S.a,null,r.a.createElement("p",null,"Su n\xba de referencia asignado es: ",r.a.createElement("strong",null,this.state.reference),". En breve recibir\xe1 un email confirm\xe1ndole la cita o nos pondremos en contacto con usted si fuese necesario."),r.a.createElement(O.a,{variant:"outline-info",size:"sm"},r.a.createElement(b.b,{to:"/"},"Volver")))))}}]),t}(n.Component),T=(a(69),a(21)),U=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(C.a,null,r.a.createElement(_.a,{className:"d-flex justify-content-center margin"},r.a.createElement(S.a,{md:4},r.a.createElement(T.a,{className:"card-admin"},r.a.createElement(T.a.Body,null,r.a.createElement(T.a.Img,{variant:"top",src:"/images/appointments.png",alt:"imagen citas"}),r.a.createElement("hr",null),r.a.createElement(O.a,{variant:"outline-info",size:"sm"},r.a.createElement(b.b,{to:"/admin/appointments"},"Citas"))))),r.a.createElement(S.a,{md:4},r.a.createElement(T.a,{className:"card-admin"},r.a.createElement(T.a.Body,null,r.a.createElement(T.a.Img,{variant:"top",src:"/images/patients2.jpeg",alt:"listado pacientes"}),r.a.createElement("hr",null),r.a.createElement(O.a,{variant:"outline-info",size:"sm"},r.a.createElement(b.b,{to:"/admin/patients"},"Pacientes")))))))}}]),t}(n.Component),F=(a(105),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).dateParse=function(e,t){return I.a.locale("es"),I()(e).format(t)},a.state={appointment:e.appointment},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{sm:6,md:3,lg:3},r.a.createElement(T.a,{className:"card-appointment"},r.a.createElement(T.a.Body,null,r.a.createElement(T.a.Text,null,this.state.appointment.patientId.name," ",this.state.appointment.patientId.surname),r.a.createElement("hr",null),r.a.createElement(T.a.Text,null,this.dateParse(this.state.appointment.date,"L")),r.a.createElement(T.a.Text,null,this.dateParse(this.state.appointment.date,"LT")," ")))))}}]),t}(n.Component)),Y=a(51),B=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).dateParse=function(e,t){return I.a.locale("es"),I()(e).format(t)},a.updateAppointmentStatus=function(e,t){return a.appointmentService.updateAppointmentStatus(e,t).then((function(e){a.setState({appointment:Object(A.a)({},a.state.appointment,{status:t})})})).catch((function(e){return console.log(e)}))},a.confirmAppointment=function(e){return a.updateAppointmentStatus(a.state.appointment._id,"accepted")},a.cancelAppointment=function(e){return a.updateAppointmentStatus(a.state.appointment._id,"cancelled")},a.confirmButton=function(e){return"pending"===e.status?r.a.createElement(O.a,{size:"sm",variant:"success",onClick:a.confirmAppointment},"Confirmar"):""},a.cancelButton=function(e){return"cancelled"!==e.status?r.a.createElement(O.a,{size:"sm",variant:"danger",onClick:a.cancelAppointment},"Cancelar"):""},a.state={appointment:e.appointment},a.appointmentService=new k,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,this.state.appointment.patientId.name," ",this.state.appointment.patientId.surname),r.a.createElement("td",null,this.dateParse(this.state.appointment.date,"L")),r.a.createElement("td",null,this.dateParse(this.state.appointment.date,"LT")),r.a.createElement("td",null,this.confirmButton(this.state.appointment)),r.a.createElement("td",null,this.cancelButton(this.state.appointment))))}}]),t}(n.Component),G=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(S.a,{sm:1,className:"menu"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(b.b,{to:"/admin/appointments"},"Citas")),r.a.createElement("li",null,r.a.createElement(b.b,{to:"/admin/patients"},"Pacientes"))))}}]),t}(n.Component),z=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){return a.getAppointments()},a.getAppointments=function(){return a.appointmentService.getAllAppointments().then((function(e){a.setState({appointments:e}),console.log(e)})).catch((function(e){return console.log(e)}))},a.isSameDay=function(e,t){return e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()&&e.getDate()===t.getDate()},a.isFutureDate=function(e,t){return t.getMonth()>e.getMonth()||t.getFullYear()>e.getFullYear()||t.getDate()>e.getDate()},a.getAppointmentsDay=function(e,t,n){var r=new Date(n,t,e);return a.state.appointments.filter((function(e){var t=new Date(Date.parse(e.date));return a.isSameDay(r,t)}))},a.getFutureAppointments=function(e){return a.state.appointments.filter((function(t){var n=new Date(Date.parse(t.date));return a.isFutureDate(e,n)}))},a.state={appointments:[]},a.appointmentService=new k,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=new Date;return r.a.createElement(C.a,{fluid:!0},r.a.createElement(_.a,{className:"margin"},r.a.createElement(G,null),r.a.createElement(S.a,{sm:9},r.a.createElement("h4",null,"Citas de HOY"),r.a.createElement("hr",null),r.a.createElement(_.a,null,this.getAppointmentsDay(e.getDate(),e.getMonth(),e.getFullYear()).length>0?this.getAppointmentsDay(e.getDate(),e.getMonth(),e.getFullYear()).map((function(e){return r.a.createElement(F,{key:e._id,appointment:e})})):r.a.createElement("p",null,"No hay citas")),r.a.createElement("h5",null,"Pr\xf3ximas Citas"),r.a.createElement(Y.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Nombre"),r.a.createElement("th",null,"Fecha"),r.a.createElement("th",null,"Hora"))),r.a.createElement("tbody",null,this.getFutureAppointments(e).map((function(e){return r.a.createElement(B,{key:e._id,appointment:e})})))),r.a.createElement(_.a,{className:"margin"},r.a.createElement(S.a,null,r.a.createElement(b.b,{to:"/admin"},r.a.createElement(O.a,{variant:"outline-secondary",size:"sm"},"Volver")))))))}}]),t}(n.Component),H=function e(){var t=this;Object(c.a)(this,e),this.getAllPatients=function(){return t.service.get("/patients").then((function(e){return e.data}))},this.getPatientDetails=function(e){return t.service.get("/patients/".concat(e)).then((function(e){return e.data}))},this.updatePatient=function(e,a){return t.service.put("/patients/".concat(e),a).then((function(e){return e.data}))},this.service=d.a.create({baseURL:"".concat("https://project-physio-app.herokuapp.com/api"),withCredentials:!0})},R=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={patient:e.patient},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(b.b,{to:"/admin/patients/".concat(this.state.patient._id)},this.state.patient.name," ",this.state.patient.surname)),r.a.createElement("td",null,this.state.patient.email))}}]),t}(n.Component),q=(a(106),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).componentDidMount=function(){return e.getPatients()},e.getPatients=function(){return e.patientService.getAllPatients().then((function(t){console.log(t),e.setState({patients:t})})).catch((function(e){return console.log(e)}))},e.handleChange=function(t){return e.setState({searchBar:t.target.value})},e.state={patients:[],searchBar:""},e.patientService=new H,e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(C.a,{fluid:!0},r.a.createElement(_.a,{className:"margin"},r.a.createElement(G,null),r.a.createElement(S.a,{sm:8},r.a.createElement("h3",null,"Pacientes"),r.a.createElement("hr",null),r.a.createElement(y.a,null,r.a.createElement(y.a.Group,null,r.a.createElement(y.a.Control,{type:"text",name:"input",placeholder:"Search...",value:this.state.searchBar,onChange:this.handleChange,className:"search-bar"}),r.a.createElement("i",{className:"fas fa-search"}))),r.a.createElement(Y.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Nombre Completo"),r.a.createElement("th",null,"Email"))),r.a.createElement("tbody",null,this.state.patients.filter((function(t){return"".concat(t.name," ").concat(t.surname," ").concat(t.email).toLowerCase().includes(e.state.searchBar.toLowerCase())})).map((function(e){return r.a.createElement(R,{key:e._id,patient:e})})))),r.a.createElement(_.a,{className:"margin"},r.a.createElement(S.a,null,r.a.createElement(b.b,{to:"/admin"},r.a.createElement(O.a,{variant:"outline-secondary",size:"sm"},"Volver")))))))}}]),t}(n.Component)),V=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){a.getPatientDetail(a.state.patientId),a.getOlderAppointments(a.state.patientId)},a.getPatientDetail=function(e){return a.patientService.getPatientDetails(e).then((function(e){a.setState({patient:e})})).catch((function(e){return console.log(e)}))},a.getOlderAppointments=function(e){return a.appoinmentService.getOlderAppointments(e).then((function(e){a.setState({appoinments:e})})).catch((function(e){return console.log(e)}))},a.state={patientId:e.match.params.id,patient:{name:"",surname:"",email:"",age:"",genre:"",antecedents:""},appoinments:[]},a.patientService=new H,a.appoinmentService=new k,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(C.a,null,r.a.createElement(_.a,{className:"margin"},r.a.createElement(S.a,null,r.a.createElement("h1",null,"Historial"),r.a.createElement("div",null,r.a.createElement(b.b,{to:"/admin/patients/".concat(this.state.patient._id,"/edit")},r.a.createElement(O.a,{variant:"outline-info",size:"sm"},"Editar Historial"))))),r.a.createElement(_.a,{className:"justify-content-center"},r.a.createElement(S.a,null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("strong",null,"Nombre Completo"),r.a.createElement("p",null,this.state.patient.name," ",this.state.patient.surname)),r.a.createElement("li",null,r.a.createElement("strong",null,"Datos de Contacto"),r.a.createElement("p",null,this.state.patient.email)),r.a.createElement("li",null,r.a.createElement("strong",null,"Edad"),r.a.createElement("p",null,this.state.patient.age)),r.a.createElement("li",null,r.a.createElement("strong",null,"Sexo"),r.a.createElement("p",null,this.state.patient.genre)))),r.a.createElement(S.a,null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("strong",null,"Motivos de la consulta"),r.a.createElement("ul",null,this.state.appoinments.map((function(e){return r.a.createElement("li",null,e.motive," - ",e.date)})))),r.a.createElement("br",null),r.a.createElement("li",null,r.a.createElement("strong",null,"Antecedentes"),r.a.createElement("p",null,this.state.patient.antecedents))))),r.a.createElement(_.a,{className:"margin"},r.a.createElement(S.a,null,r.a.createElement(b.b,{to:"/admin/patients"},r.a.createElement(O.a,{variant:"outline-secondary",size:"sm"},"Volver")))))}}]),t}(n.Component),J=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){return a.getPatientDetail(a.state.patientId)},a.getPatientDetail=function(e){return a.patientService.getPatientDetails(e).then((function(e){var t=e.name,n=e.surname,r=e.genre,l=e.age,i=e.antecedents,c=e.email;a.setState({patient:{name:t,surname:n,genre:r,age:l,antecedents:i,email:c}})})).catch((function(e){return console.log(e)}))},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState({patient:Object(A.a)({},a.state.patient,Object(j.a)({},n,r))})},a.handleSubmit=function(e){e.preventDefault(),a.patientService.updatePatient(a.state.patientId,a.state.patient).then((function(e){a.props.history.push("/admin/patients/".concat(e._id))})).catch((function(e){return console.log(e)}))},a.state={patientId:e.match.params.id,patient:{name:"",surname:"",email:"",age:"",genre:"",antecedents:""}},a.patientService=new H,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(C.a,null,r.a.createElement(y.a,{onSubmit:this.handleSubmit},r.a.createElement(y.a.Group,null,r.a.createElement(y.a.Label,null,"Nombre"),r.a.createElement(y.a.Control,{name:"name",type:"text",value:this.state.patient.name,onChange:this.handleChange})),r.a.createElement(y.a.Group,null,r.a.createElement(y.a.Label,null,"Apellidos"),r.a.createElement(y.a.Control,{name:"surname",type:"text",value:this.state.patient.surname,onChange:this.handleChange})),r.a.createElement(y.a.Group,null,r.a.createElement(y.a.Label,null,"Email"),r.a.createElement(y.a.Control,{name:"email",type:"email",value:this.state.patient.email,onChange:this.handleChange})),r.a.createElement(y.a.Group,null,r.a.createElement(y.a.Label,null,"Edad"),r.a.createElement(y.a.Control,{name:"age",type:"number",value:this.state.patient.age||0,onChange:this.handleChange})),r.a.createElement(y.a.Group,null,r.a.createElement(y.a.Label,null,"Sexo"),r.a.createElement("select",{name:"genre",value:this.state.patient.genre||"",className:"form-control",onChange:this.handleChange},r.a.createElement("option",{value:""},"---"),r.a.createElement("option",{value:"mujer"},"Mujer"),r.a.createElement("option",{value:"hombre"},"Hombre"))),r.a.createElement(y.a.Group,null,r.a.createElement(y.a.Label,null,"Antecedentes"),r.a.createElement("textarea",{name:"antecedents",className:"form-control",onChange:this.handleChange,value:this.state.patient.antecedents})),r.a.createElement(O.a,{variant:"success",type:"submit"},"Guardar")))}}]),t}(n.Component),W=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).componentDidUpdate=function(t,a){return console.log("El estado de App se ha actualizado:",e.state)},e.componentDidMount=function(){return e.fetchUser()},e.setTheUser=function(t){return e.setState({loggedInUser:t})},e.fetchUser=function(){e.authServices.loggedin().then((function(t){return e.setState({loggedInUser:t})})).catch((function(){return e.setState({loggedInUser:!1})}))},e.state={loggedInUser:!1},e.authServices=new E,e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"bg"},r.a.createElement(v,{setTheUser:this.setTheUser,loggedInUser:this.state.loggedInUser}),r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/",render:function(){return r.a.createElement(w,null)}}),r.a.createElement(p.b,{exact:!0,path:"/appointment",render:function(e){return r.a.createElement(M,e)}}),r.a.createElement(p.b,{path:"/appointment/created/:reference",render:function(e){return r.a.createElement(x,e)}}),r.a.createElement(p.b,{path:"/login",render:function(t){return r.a.createElement(L,Object.assign({setTheUser:e.setTheUser},t))}}),this.state.loggedInUser?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.b,{exact:!0,path:"/admin",render:function(){return r.a.createElement(U,{loggedInUser:e.state.loggedInUser})}}),r.a.createElement(p.b,{path:"/admin/appointments",render:function(){return r.a.createElement(z,null)}}),r.a.createElement(p.b,{exact:!0,path:"/admin/patients",render:function(){return r.a.createElement(q,null)}}),r.a.createElement(p.b,{exact:!0,path:"/admin/patients/:id/edit",render:function(e){return r.a.createElement(J,e)}}),r.a.createElement(p.b,{exact:!0,path:"/admin/patients/:id",render:function(e){return r.a.createElement(V,e)}})):r.a.createElement(p.a,{to:"/"})))}}]),t}(n.Component);i.a.render(r.a.createElement(b.a,null,r.a.createElement(W,null)),document.getElementById("root"))},69:function(e,t,a){},73:function(e,t,a){e.exports=a(107)},79:function(e,t,a){}},[[73,1,2]]]);
//# sourceMappingURL=main.5749c210.chunk.js.map